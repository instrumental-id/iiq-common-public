checkstyle {
    showViolations = false
    toolVersion = '9.3'
}

tasks.withType(Checkstyle).configureEach {
    reports {
        html.required = false
    }

    finalizedBy tasks.named('transmuteCheckstyleOutput').get()
}

tasks.register("transmuteCheckstyleOutput", Exec) {
    commandLine 'scripts/ci/convert-checkstyle.sh'
    inputs.dir file("${buildDir}/reports/checkstyle")
    outputs.files file("${buildDir}/reports/checkstyle/main.json")
}
